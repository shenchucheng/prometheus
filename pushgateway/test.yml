     
global:
  # How frequently to scrape targets by default. s/m
  scrape_interval: 1m

  # How long until a scrape request times out.
  scrape_timeout: 5s

  # The labels to add to any time series or alerts when communicating with
  external_labels:
    owner: deepwisdom
    env: test

  # pushgateway server
  pushgateway:
    scheme: http
    target: monitor.api.test.metadl.com
    metrics_path: '/metrics'
    basic_auth:
      username:
      password:  

  # TODO
  # Logger level
  # File to which PromQL queries are logged.
  # [ query_log_file: <string> ]

# A list of scrape configurations.
scrape_configs:
  - job_name: ping
    metrics_path: /probe
    params:
      module: [ping]  
    static_configs:
      - targets: ['192.168.50.22']
        labels:
          user: slave1

      - targets: ['192.168.50.23']
        labels:
          user: slave2
  
    file_sd_configs:
      - files:
        # YAML yaml - targets: [ - '<host>' ] labels: [ <labelname>: <labelvalue> ... ]
        # JSON json [ { "targets": [ "<host>", ... ], "labels": { "<labelname>": "<labelvalue>", ... } }, ... ]
          - './pushgateway_ping_test.yml'
          - './pushgateway_ping_test.json'
        refresh_interval: 0s 
    
    # host_sd_configs:  # TODO python 扫描本地主机
             
    relabel_configs:
      - source_labels: [__address__]
        target_label: __param_target
      - source_labels: [__param_target]
        target_label: instance
      - target_label: __address__
        replacement: 127.0.0.1:9115   

  - job_name: tcp_connect
    metrics_path: /probe
    params:
        module: [tcp_connect]  
    timeout: 5s
    scheme: http
    # basic_auth  # basic_auth 验证
    #   username:
    #   password:

    file_sd_configs:
      - files: ['./pushgateway_tcp_test.yml']  # - './tcp_connect/*.yml'  # TODO
        refresh_interval: 5m

    relabel_configs:
      - source_labels: [__address__]
        target_label: __param_target
      - source_labels: [__param_target]
        target_label: instance
      - target_label: __address__
        replacement: 127.0.0.1:9115 



    

    

    